language: node_js
node_js:
- node
before_install:
- npm install -g mocha
env:
  global:
  - PORT=8080
  - HOST=enzomallard.fr
cache:
  directories:
  - node_modules
install:
- npm install
script:
- mocha --exit 2> /dev/null
notifications:
  slack:
    secure: D7+Pc1Ou+VYrwqxY/1Ge+8VefILNttRDty3sREJQZY9LIcXXWx633myH494BwhZdz6TLFC1S616TbeFm25IboxPd5p6jMRiGEnC3cVLzofnaDMm40pwZT0jPEvHhVL6jA9d2zl2OlpcyJLHEECLiowgD6voxXZEqJSZScibncwGjEze4MXtcHixhF6mTyrLubDpnbnTJCObDAvcsqXnzLNCRAMjmPQnX792vbj0Hv6LuoJ4HwBvlk6naH8jeitFt50i9WSaP2dzhf+80+thmKb25n82UOm314EKxNHX60w5r4rQseTpWv0K8eMHH23VNMCw3HNz2XaIYpRhLZ1gR4C5S5nQILkkMofIWCsztBKjcyZKgZuAGgpWJFwPgtvzGKdApsZrrCd0EWIxemr390evticH3RdWmlRBnuMO5kvhYgaKA3Yl9T+n3UOYyBSp0cJKMI3naqcHqN6PSG4vGS2kzUu9wZdkI0GKzISlKRlo55hwupAHk+sRNXe9Fy8Sn3ax43CrUcERQXS+bLZl6LxZH3P4datXKuIT67GgYfIB5FQNMXPTaFD/JeoitUlcN8jt6zv6RicixqI7fdOnLhCxW0h2DdPyAxaNxHQR74N+vJ/84WAFNS4GjorD+CpzAnD6aZArMv1YSZAAxCWnXsneCr4fPveqYvqeqcEUBqKI=
before_deploy: zip -r ~/build/build_$TRAVIS_BUILD_NUMBER.zip ~/build/EnzDev/CIChat
  -x \ \*node_modules/**\* \ \*.git/**\* \ \*.gitignore \ \*.deployarti.sh
deploy:
- provider: script
  script: bash deployarti.sh
  on:
    branch: develop
- provider: releases
  api_key:
    secure: gox0SX50NBRCYfbscfNZ8b5yJxVcj9T7q5wnWEPDvMe+6eZHTEr0UzbqK/9qvY5V44wB8sTgtDxqfEK5Nc0QgwAT2W72PWFj0m8I+Hq4dwAaUMgStgyrx7rEbSJiqc29rgDh9HeBU7yGN9oYbOQUUTfhjKSrrk59oHjnRMxe6liOG3EMHCCcJnfcwrU6VPd/0tngGdnJ6R6u4ZmIdiatTc4shmtFZk4eTszbJ3fcsojLCvdCAStoCbhmUYFAySQqs/LhGc7nBJckOrM1RufR1dKuK32Hm4UScHxEOV9eoaUKHX5qzR797OqUC8gSfUyyn5Iyx3ol1CM3k/61dDsEMwGBtTcg9CrVxnssfACX74WZ8xFh9kBYS+IuhWVr+PHxX9MxtkmQwJ5KKiLQ4C1CWqqFzycRhyWquyIgiJ3HS5NP05s3PiKRpIaQtUmY6+XFR0GNa/IF3+fOsd9j0fxGw2X+6rxlVQqPWCCLojQv5QV51JBOVkkm/Xb9rlNjQLWumEx9PWnvs1w5U2HkGEYU1WVoJvHB7Dbob1pU93xdslukdoDhwomTttowGIsxAGfWHNpea0RujN93LfRHGO+DjftXvQV3R8BWv8mUohZwaVBmMVhXymHWzpONU6kiZoZOuwsp0mlkN8Mlx0rdfCvqg50IQ1q5a6pdr3wXnsXrGHk=
  file: "~/build/build_$TRAVIS_BUILD_NUMBER.zip"
  on:
    branch: master
